{"ast":null,"code":"import { db } from \"../../utils/firebaseConfig\";\nimport { useEffect, useState } from \"react\";\nexport const createComment = (comment, game, currentUser, profil) => {\n  if (currentUser === null) {\n    return;\n  }\n\n  return db.collection(\"Comments\").add({\n    author: profil,\n    gameId: game.id,\n    text: comment,\n    profilID: profil.uid\n  }).then(() => {\n    console.log(\"createComment OK\");\n    return true;\n  }).catch(reason => {\n    console.log(\"createComment Error : \" + reason);\n    return false;\n  });\n};\nexport const updateComment = (updatedText, comment, currentUser) => {\n  if (currentUser === null) {\n    return;\n  }\n\n  return db.collection(\"Comments\").doc(comment.id).set({\n    author: comment.data().author,\n    gameId: comment.data().gameId,\n    profilID: comment.data().profilID,\n    text: updatedText\n  }).then(() => {\n    console.log(\"updateComment OK\");\n    return true;\n  }).catch(reason => {\n    console.log(\"updateComment Error : \" + reason);\n    return false;\n  });\n  deleteComment();\n};\nexport const deleteComment = (comment, currentUser) => {\n  if (currentUser === null) {\n    return;\n  }\n\n  return db.collection(\"Comments\").doc(comment.id).delete().then(() => {\n    console.log(\"deleteComment OK\");\n    return true;\n  }).catch(reason => {\n    console.log(\"deleteComment Error : \" + reason);\n    return false;\n  });\n};","map":{"version":3,"sources":["/Users/benjaminserval/dev/GameV2/gamesite/src/components/comments/CommentrayFirestoreService.jsx"],"names":["db","useEffect","useState","createComment","comment","game","currentUser","profil","collection","add","author","gameId","id","text","profilID","uid","then","console","log","catch","reason","updateComment","updatedText","doc","set","data","deleteComment","delete"],"mappings":"AAAA,SAASA,EAAT,QAAmB,4BAAnB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,OAAD,EAAUC,IAAV,EAAgBC,WAAhB,EAA6BC,MAA7B,KAAwC;AAEnE,MAAID,WAAW,KAAK,IAApB,EAA0B;AACxB;AACD;;AACD,SAAON,EAAE,CACNQ,UADI,CACO,UADP,EAEJC,GAFI,CAEA;AACHC,IAAAA,MAAM,EAAEH,MADL;AAEHI,IAAAA,MAAM,EAAEN,IAAI,CAACO,EAFV;AAGHC,IAAAA,IAAI,EAAET,OAHH;AAIHU,IAAAA,QAAQ,EAAEP,MAAM,CAACQ;AAJd,GAFA,EASJC,IATI,CASC,MAAM;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,WAAO,IAAP;AACD,GAZI,EAaJC,KAbI,CAaEC,MAAM,IAAI;AACfH,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2BE,MAAvC;AACA,WAAO,KAAP;AACD,GAhBI,CAAP;AAiBD,CAtBM;AAwBP,OAAO,MAAMC,aAAa,GAAG,CAACC,WAAD,EAAclB,OAAd,EAAuBE,WAAvB,KAAuC;AAClE,MAAIA,WAAW,KAAK,IAApB,EAA0B;AACxB;AACD;;AAED,SAAON,EAAE,CACNQ,UADI,CACO,UADP,EAEJe,GAFI,CAEAnB,OAAO,CAACQ,EAFR,EAGJY,GAHI,CAGA;AACHd,IAAAA,MAAM,EAAEN,OAAO,CAACqB,IAAR,GAAef,MADpB;AAEHC,IAAAA,MAAM,EAAEP,OAAO,CAACqB,IAAR,GAAed,MAFpB;AAGHG,IAAAA,QAAQ,EAAEV,OAAO,CAACqB,IAAR,GAAeX,QAHtB;AAIHD,IAAAA,IAAI,EAAES;AAJH,GAHA,EASJN,IATI,CASC,MAAM;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,WAAO,IAAP;AACD,GAZI,EAaJC,KAbI,CAaEC,MAAM,IAAI;AACfH,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2BE,MAAvC;AACA,WAAO,KAAP;AACD,GAhBI,CAAP;AAiBEM,EAAAA,aAAa;AAChB,CAvBM;AAyBP,OAAO,MAAMA,aAAa,GAAG,CAACtB,OAAD,EAAUE,WAAV,KAA0B;AACrD,MAAIA,WAAW,KAAK,IAApB,EAA0B;AACxB;AACD;;AAED,SAAON,EAAE,CACNQ,UADI,CACO,UADP,EAEJe,GAFI,CAEAnB,OAAO,CAACQ,EAFR,EAGJe,MAHI,GAIJX,IAJI,CAIC,MAAM;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,WAAO,IAAP;AACD,GAPI,EAQJC,KARI,CAQEC,MAAM,IAAI;AACfH,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2BE,MAAvC;AACA,WAAO,KAAP;AACD,GAXI,CAAP;AAYD,CAjBM","sourcesContent":["import { db } from \"../../utils/firebaseConfig\";\nimport { useEffect, useState } from \"react\";\n\nexport const createComment = (comment, game, currentUser, profil) => {\n\n  if (currentUser === null) {\n    return;\n  }\n  return db\n    .collection(\"Comments\")\n    .add({\n      author: profil,\n      gameId: game.id,\n      text: comment,\n      profilID: profil.uid\n\n    })\n    .then(() => {\n      console.log(\"createComment OK\");\n      return true;\n    })\n    .catch(reason => {\n      console.log(\"createComment Error : \" + reason);\n      return false;\n    });\n};\n\nexport const updateComment = (updatedText, comment, currentUser) => {\n  if (currentUser === null) {\n    return;\n  }\n\n  return db\n    .collection(\"Comments\")\n    .doc(comment.id)\n    .set({\n      author: comment.data().author,\n      gameId: comment.data().gameId,\n      profilID: comment.data().profilID,\n      text: updatedText\n    })\n    .then(() => {\n      console.log(\"updateComment OK\");\n      return true;\n    })\n    .catch(reason => {\n      console.log(\"updateComment Error : \" + reason);\n      return false;\n    });\n    deleteComment()\n};\n\nexport const deleteComment = (comment, currentUser) => {\n  if (currentUser === null) {\n    return;\n  }\n\n  return db\n    .collection(\"Comments\")\n    .doc(comment.id)\n    .delete()\n    .then(() => {\n      console.log(\"deleteComment OK\");\n      return true;\n    })\n    .catch(reason => {\n      console.log(\"deleteComment Error : \" + reason);\n      return false;\n    });\n};\n"]},"metadata":{},"sourceType":"module"}